angular.module("cgPrompt",["ui.bootstrap"]),angular.module("cgPrompt").factory("prompt",["$uibModal","$q",function(a,b){var c=function(c){var d={title:"",message:"",inputRequired:!0,inputMinLength:0,inputMaxLength:1e3,input:!1,label:"",value:"",values:!1,buttons:[{label:"OK",primary:!0},{label:"Cancel",cancel:!0}]};void 0===c&&(c={});for(var e in d)void 0===c[e]&&(c[e]=d[e]);var f=b.defer();return a.open({templateUrl:"scripts/angular-prompt.html",controller:"cgPromptCtrl",resolve:{options:function(){return c}}}).result.then(function(a){c.input?f.resolve(a.input):f.resolve(a.button)},function(){f.reject()}),f.promise};return c}]),angular.module("cgPrompt").controller("cgPromptCtrl",["$scope","options","$timeout","$sanitize",function(a,b,c,d){a.input={name:b.value},a.options=b,a.form={},a.buttonClicked=function(c){return c.cancel?void a.$dismiss():b.input&&a.form.cgPromptForm.$invalid?void(a.changed=!0):void a.$close({button:c,input:a.input.name})},a.submit=function(){var b;angular.forEach(a.options.buttons,function(a){a.primary&&(b=a)}),b&&a.buttonClicked(b)},c(function(){var a=document.querySelector("#cgPromptInput");a&&(a.select&&a.select(),a.focus&&a.focus())},100)}]),angular.module("cgPrompt").run(["$templateCache",function(a){"use strict";a.put("angular-prompt.html",'<div>\r\n    <div class="modal-header">\r\n        <button type="button" class="close pull-right" ng-click="$dismiss()" aria-hidden="true">&times;</button>\r\n        <h4 class="modal-title">{{ options.title }}</h4>\r\n    </div>\r\n    <div class="modal-body">\r\n\r\n        <p ng-if="options.message" ng-bind-html="options.message"></p>\r\n\r\n        <form id="cgPromptForm" name="form.cgPromptForm" ng-if="options.input" ng-submit="submit()">\r\n            <div class="form-group" ng-class="{\'has-error\':cgPromptForm.$invalid && changed}">\r\n                <label for="cgPromptInput">{{ options.label }}</label>\r\n                <input id="cgPromptInput" type="text" class="form-control"\r\n                       placeholder="{{options.label}}" name="cgPromptInput"\r\n                       ng-model="input.name" ng-change="changed=true"\r\n                       ng-if="!options.values || options.values.length === 0"/ autofocus="autofocus"\r\n                       ng-maxlength="{{options.inputMaxLength}}" ng-minlength="{{options.inputMinLength}}"\r\n                       ng-required="{{options.inputRequired}}"\r\n                >\r\n                 <div ng-show="changed" style="margin:5px;color:#a94442;">\r\n                    <p ng-if="cgPromptForm.cgPromptInput.$error.minlength" class="cg-prompt-error">\'{{ options.label }}\' requires at least {{ options.inputMinLength }} characters.</p>\r\n                    <p ng-if="cgPromptForm.cgPromptInput.$error.maxlength">\'{{ options.label }}\' can have at most {{ options.inputMaxLength }} characters.</p>\r\n                    <p ng-if="cgPromptForm.cgPromptInput.$error.required">The field for \'{{ options.label }}\' is required to continue.</p>\r\n                 </div>\r\n                <div class="input-group" ng-if="options.values">\r\n                    <input id="cgPromptInput" type="text" class="form-control"\r\n                           placeholder="{{ options.label }}" ng-model="input.name"\r\n                           ng-change="changed=true"\r\n                           autofocus="autofocus"\r\n                           required\r\n                    />\r\n\r\n                    <div class="input-group-btn" dropdown>\r\n                        <button type="button" class="btn btn-default dropdown-toggle" dropdown-toggle data-toggle="dropdown"><span class="caret"></span></button>\r\n                        <ul class="dropdown-menu pull-right">\r\n                            <li ng-repeat="value in options.values"><a href="" ng-click="input.name = value">{{ value }}</a></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n         </form>\r\n\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button ng-repeat="button in options.buttons track by button.label"\r\n                class="btn btn-default {{ button.class }}"\r\n                style="{{ button.style }}"\r\n                ng-class="{\'btn-primary\':button.primary}"\r\n                ng-click="buttonClicked(button)">{{ button.label }}</button>\r\n    </div>\r\n</div>\r\n')}]);